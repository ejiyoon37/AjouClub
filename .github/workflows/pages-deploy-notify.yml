name: Notify on GitHub Pages Deployment

on:
  deployment_status:
    types:
      - success
      - failure

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Notify on success
        if: github.event.deployment_status.state == 'success'
        run: |
          curl -H "Content-Type: application/json" \
          -d '{
            "embeds": [{
              "title": "âœ… GitHub Pages ìµœì¢… ë°°í¬ ì™„ë£Œ",
              "description": "ì‚¬ì´íŠ¸ **ajouclub.co.kr** ì˜ ë°°í¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
              "color": 65280,
              "fields": [
                {"name": "Repository", "value": "${{ github.repository }}", "inline": true},
                {"name": "Branch", "value": "${{ github.event.deployment.ref }}", "inline": true},
                {"name": "í™˜ê²½", "value": "${{ github.event.deployment.environment }}", "inline": true}
              ],
              "footer": {"text": "GitHub Pages - ìµœì¢… ë°°í¬ ì™„ë£Œ"}
            }]
          }' \
          ${{ secrets.DISCORD_WEBHOOK_URL }}

      - name: Notify on failure
        if: github.event.deployment_status.state != 'success'
        run: |
          curl -H "Content-Type: application/json" \
          -d '{
            "embeds": [{
              "title": "ğŸš¨ GitHub Pages ë°°í¬ ì‹¤íŒ¨",
              "description": "GitHub Pages ë‚´ë¶€ ë¹Œë“œ ë˜ëŠ” ë°°í¬ê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",
              "color": 16711680,
              "fields": [
                {"name": "Repository", "value": "${{ github.repository }}", "inline": true},
                {"name": "Branch", "value": "${{ github.event.deployment.ref }}", "inline": true}
              ],
              "footer": {"text": "GitHub Pages - ë°°í¬ ì‹¤íŒ¨"}
            }]
          }' \
          ${{ secrets.DISCORD_WEBHOOK_URL }}
