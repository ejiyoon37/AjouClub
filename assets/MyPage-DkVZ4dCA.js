import{j as e,u as l,c as g,a as m,b as u,r as p}from"./index-DEXBsR4C.js";import{u as f}from"./useMypageData-FRZiUGxZ.js";import{D as h}from"./Default_images-DTygkBZ9.js";import{H as j}from"./Header-iK4IU58C.js";import"./useQuery-C7pHblR0.js";import"./icn_search_24-2-dtgI0gZA.js";const y="/assets/user-CwYT89CU.png",b=({user:t})=>e.jsxs("section",{role:"region","aria-label":"사용자 프로필 영역",className:"flex flex-col items-center py-8 px-6 bg-white",children:[e.jsx("img",{src:t.profilePic||y,alt:`${t.name}의 프로필 사진`,className:"w-[72px] h-[72px] rounded-full border border-gray-100 object-cover"}),e.jsx("p",{className:"mt-4 text-[18px] font-semibold text-gray-900 leading-[135%] tracking-[-0.03em]",children:t.name}),e.jsx("p",{className:"mt-[2px] text-[14px] font-medium text-gray-300 leading-[135%] tracking-[-0.03em]",children:t.email})]}),N=({item:t})=>{const a=l(),r=()=>{a(`/recruitments/${t.clubId}`)};return e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-xl border border-gray-100 cursor-pointer",onClick:r,children:[e.jsx("img",{src:t.thumbnailUrl||h,alt:t.title,className:"w-[80px] h-[80px] rounded-md object-cover border border-gray-200"}),e.jsx("p",{className:"text-[15px] font-medium text-gray-900 leading-[135%] tracking-[-0.03em]",children:t.title})]})},v=async()=>{try{await g.post("/api/auth/logout"),m.getState().logout()}catch(t){console.error("Logout 실패:",t)}},P=()=>{const{isLoggedIn:t,logout:a}=m(),r=l(),n=u(),{user:i,favorites:c,isLoading:x,error:o}=f();p.useEffect(()=>{t||r(`/login?redirect=${n.pathname}`,{replace:!0})},[t,r,n]);const d=async()=>{try{await v()}catch(s){console.error("서버 로그아웃 실패:",s)}a(),window.location.href="/"};return x?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:"로딩 중..."}):o||!i?e.jsxs("div",{className:"flex justify-center items-center min-h-screen",children:["오류가 발생했습니다:"," ",o?.message||"사용자 정보를 불러올 수 없습니다."]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx(j,{variant:"page"}),e.jsx(b,{user:i}),e.jsx("div",{className:"w-full h-2 bg-gray-50"}),e.jsxs("div",{className:"px-4 py-5",children:[e.jsx("p",{className:"text-[14px] font-medium leading-[135%] tracking-[-0.03em] text-gray-600 mb-2",children:"저장한 공고"}),c.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-16",children:e.jsx("p",{className:"text-[16px] font-medium text-gray-300 leading-[135%] tracking-[-0.03em] text-center",children:"저장한 공고가 없습니다"})}):c.map(s=>e.jsx("div",{children:e.jsx(N,{item:s})},s.recruitmentId))]}),e.jsx("div",{className:"px-6 mt-10",children:e.jsx("button",{className:"text-[12px] font-medium underline text-gray-600 leading-[140%] tracking-[-0.03em]",onClick:d,children:"로그아웃하기"})})]})};export{P as default};
