import{e as b,r as c,j as t,c as u,u as j,f as v}from"./index-BOwi9D-X.js";import{H as w}from"./Header-Bl0UjeGb.js";import{T as N}from"./Chip_type-DCtAD8hW.js";import{u as x}from"./useQuery-XMJWr1Nc.js";import{P as k}from"./Chip_period-BWFeznSV.js";import{D as E}from"./Default_images-DTygkBZ9.js";import{f as A}from"./date-B0GoYsVM.js";import"./icn_search_24-2-BruKq-2o.js";var I=b();const M=e=>c.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M8.13647 1.15906C10.3302 1.15906 13.2466 2.71717 13.2468 6.76648C13.2468 10.4981 10.5599 12.9439 8.60913 14.4159C8.26177 14.6779 7.78191 14.673 7.43823 14.4061C5.5402 12.9324 2.75366 10.4197 2.75366 6.76648C2.75386 2.71726 5.94274 1.15915 8.13647 1.15906ZM7.99976 4.70203C6.97282 4.70216 6.14038 5.53541 6.14038 6.56238C6.1405 7.58924 6.97289 8.42162 7.99976 8.42175C9.02673 8.42175 9.85998 7.58933 9.86011 6.56238C9.86011 5.53533 9.02681 4.70203 7.99976 4.70203Z",fill:"#A0AAB0"})),S=e=>c.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("circle",{cx:7.99967,cy:5.07181,r:3.47757,fill:"#A0AAB0"}),c.createElement("path",{d:"M2.49477 13.7423C2.7214 11.0325 4.34699 8.12549 7.94188 8.12549C11.5368 8.12549 13.2609 11.0326 13.5025 13.7424C13.5351 14.1083 13.2345 14.4063 12.8672 14.4063H3.13194C2.76467 14.4063 2.46416 14.1083 2.49477 13.7423Z",fill:"#A0AAB0"})),T=e=>c.createElement("svg",{width:25,height:24,viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M9.06521 12C9.06521 12.836 9.10261 13.6465 9.17213 14.42H15.5583C15.6278 13.6465 15.6652 12.836 15.6652 12C15.6652 11.164 15.6278 10.3535 15.5578 9.57998H9.17301C9.10261 10.3535 9.06521 11.164 9.06521 12ZM7.84773 9.57998C7.77886 10.3848 7.74466 11.1922 7.74521 12C7.74521 12.8298 7.78041 13.6399 7.84729 14.42H2.76309C2.56861 13.6456 2.46521 12.8347 2.46521 12C2.46521 11.1653 2.56861 10.3544 2.76309 9.57998H7.84773ZM9.32877 8.25998H15.4012C15.2058 6.9281 14.9102 5.74054 14.5436 4.76506C14.2009 3.85294 13.8093 3.15994 13.4085 2.70762C13.0067 2.25354 12.6521 2.09998 12.3652 2.09998C12.0783 2.09998 11.7237 2.25398 11.3215 2.70718C10.9207 3.16038 10.5291 3.85294 10.1863 4.76506C9.81981 5.74054 9.52413 6.9281 9.32833 8.25998M16.8827 9.57998C16.95 10.3601 16.9852 11.1701 16.9852 12C16.9852 12.8298 16.95 13.6399 16.8831 14.42H21.9673C22.1618 13.6456 22.2652 12.8347 22.2652 12C22.2652 11.1653 22.1618 10.3544 21.9673 9.57998H16.8827ZM21.5348 8.25998H16.7348C16.528 6.76926 16.2007 5.42198 15.7796 4.30086C15.5108 3.58542 15.1975 2.94478 14.8406 2.41194C17.8854 3.19602 20.3626 5.39206 21.5339 8.25998M7.99513 8.25998H3.19605C4.36689 5.39206 6.84453 3.19602 9.88933 2.41238C9.53293 2.94478 9.21921 3.58542 8.95037 4.30086C8.52929 5.42198 8.20237 6.76926 7.99557 8.25998M7.99425 15.74H3.19605C4.36645 18.6066 6.84189 20.8017 9.88405 21.5867C9.52765 21.0543 9.21525 20.4137 8.94685 19.6991C8.52665 18.5771 8.20017 17.2307 7.99425 15.74ZM14.5476 19.2353C14.9128 18.2599 15.2076 17.0723 15.403 15.74H9.32745C9.52237 17.0723 9.81717 18.2599 10.1828 19.2353C10.5251 20.1475 10.9163 20.84 11.318 21.2923C11.7193 21.7455 12.0748 21.9 12.3652 21.9C12.6556 21.9 13.0111 21.7455 13.4124 21.2923C13.8141 20.84 14.2053 20.1475 14.5476 19.2353ZM15.7836 19.6987C16.2038 18.5775 16.5302 17.2303 16.7362 15.74H21.5344C20.364 18.6066 17.8885 20.8017 14.8464 21.5867C15.2028 21.0543 15.5152 20.4132 15.7836 19.6987Z",fill:"#6E757D"})),D=e=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12.0001 8.78665C10.2207 8.78665 8.7861 10.235 8.7861 12.0006C8.7861 13.7663 10.2345 15.2147 12.0001 15.2147C13.7657 15.2147 15.2141 13.7663 15.2141 12.0006C15.2141 10.235 13.7657 8.78665 12.0001 8.78665ZM21.6559 12.0006C21.6559 10.6626 21.6559 9.3522 21.5869 8.01418C21.518 6.46926 21.1593 5.08985 20.0282 3.97254C18.8971 2.84143 17.5315 2.48279 15.9866 2.41382C14.6485 2.34485 13.3381 2.34485 12.0001 2.34485C10.6621 2.34485 9.35165 2.34485 8.01363 2.41382C6.46871 2.48279 5.08931 2.84143 3.97199 3.97254C2.84088 5.10365 2.48224 6.46926 2.41327 8.01418C2.3443 9.3522 2.3443 10.6626 2.3443 12.0006C2.3443 13.3387 2.3443 14.6491 2.41327 15.9871C2.48224 17.532 2.84088 18.9114 3.97199 20.0288C5.1031 21.1599 6.46871 21.5185 8.01363 21.5875C9.35165 21.6565 10.6621 21.6565 12.0001 21.6565C13.3381 21.6565 14.6485 21.6565 15.9866 21.5875C17.5315 21.5185 18.9109 21.1599 20.0282 20.0288C21.1593 18.8976 21.518 17.532 21.5869 15.9871C21.6697 14.6629 21.6559 13.3387 21.6559 12.0006ZM12.0001 16.9527C9.25509 16.9527 7.04805 14.7457 7.04805 12.0006C7.04805 9.25564 9.25509 7.0486 12.0001 7.0486C14.7451 7.0486 16.9521 9.25564 16.9521 12.0006C16.9521 14.7457 14.7451 16.9527 12.0001 16.9527ZM17.1591 8.00039C16.5245 8.00039 16.0004 7.49001 16.0004 6.84169C16.0004 6.19338 16.5107 5.683 17.1591 5.683C17.8074 5.683 18.3177 6.19338 18.3177 6.84169C18.3212 6.99279 18.2937 7.14299 18.2367 7.28298C18.1798 7.42298 18.0947 7.54979 17.9867 7.65554C17.8809 7.76351 17.7541 7.84861 17.6141 7.90555C17.4741 7.9625 17.3239 7.99009 17.1728 7.9866L17.1591 8.00039Z",fill:"#6E757D"})),L=({club:e})=>e?t.jsxs("section",{className:"px-4 pt-6 pb-4 bg-white",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:e.profileImageUrl||"/OnlyLogo.svg",alt:"club logo",className:"w-[64px] h-[64px] rounded-full border border-gray-100 object-cover"}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx(N,{size:"medium",children:e.clubType}),t.jsx("p",{className:"text-[18px] font-semibold text-gray-900 leading-[135%] tracking-[-0.03em]",children:e.clubName})]})]}),t.jsxs("div",{className:"mt-4 space-y-2",children:[e.location&&t.jsx(p,{icon:t.jsx(M,{}),label:"동아리 방",value:e.location}),e.details&&t.jsx(p,{icon:t.jsx(S,{}),label:"모집 대상",value:e.details}),t.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[t.jsx("span",{className:"text-[14px] font-medium leading-[135%] tracking-[-0.03em] text-gray-600",children:"SNS"}),e.clubUrl&&t.jsx("a",{href:e.clubUrl,target:"_blank",rel:"noopener noreferrer",children:t.jsx(T,{})}),e.instagramUrl&&t.jsx("a",{href:e.instagramUrl,target:"_blank",rel:"noopener noreferrer",children:t.jsx(D,{})})]})]})]}):null,p=({icon:e,label:r,value:s})=>t.jsxs("div",{className:"flex items-center gap-2",children:[e,t.jsx("span",{className:"text-[14px] font-medium leading-[135%] tracking-[-0.03em] text-gray-600",children:r}),t.jsx("span",{className:"text-[14px] font-medium leading-[135%] tracking-[-0.03em] text-gray-400",children:s})]}),H=({defaultTab:e="모집공고",onTabChange:r})=>{const[s,n]=c.useState(e),l=a=>{n(a),r(a)};return t.jsx("div",{className:"flex w-full border-b border-gray-100",children:["모집공고","동아리 소개"].map(a=>t.jsx("button",{onClick:()=>l(a),className:`flex-1 text-center py-3 text-[16px] font-semibold leading-[135%] tracking-[-0.03em]
            ${s===a?"text-gray-900":"text-gray-300"}
          `,children:a},a))})},U=async e=>{try{return(await u.get(`/api/recruitments/${e}/images`)).data}catch{return[]}},Z=({recruitmentId:e,recruitmentStatus:r,dDay:s,title:n,viewCount:l,saveCount:a,postedDate:i})=>{const{data:m}=x({queryKey:["recruitmentThumbnail",e],queryFn:()=>U(e),staleTime:1/0}),d=m?.[0]||E;return t.jsxs("div",{className:"flex w-full bg-white p-4 gap-3 border-b border-gray-100",children:[t.jsx("img",{src:d,alt:`${n} thumbnail`,className:"w-[100px] h-[100px] object-cover rounded-[10px] border border-gray-100 flex-shrink-0",loading:"lazy",decoding:"async"}),t.jsxs("div",{className:"flex flex-col flex-grow justify-between",children:[t.jsxs("div",{children:[t.jsx(k,{status:r,dDay:s,size:"medium"}),t.jsx("p",{className:"mt-1 text-base font-medium text-gray-900 leading-[1.35] tracking-[-0.03em]",children:n})]}),t.jsxs("div",{className:"flex justify-between items-center text-xs font-normal text-gray-300 leading-[1.4] tracking-[-0.02em]",children:[t.jsxs("div",{className:"flex gap-2",children:[l!==void 0&&t.jsxs("span",{children:["조회 ",l]}),t.jsxs("span",{children:["저장 ",a]})]}),t.jsx("span",{children:i})]})]})]})},R=async e=>{const r=await u.get(`/api/recruitments/club/${e}`);if(r.data.status!==200)throw new Error(r.data.message);return Array.isArray(r.data.data)?r.data.data:[]},y=e=>{if(!e)return 0;const r=new Date,s=new Date(e);r.setHours(0,0,0,0),s.setHours(0,0,0,0);const n=s.getTime()-r.getTime(),l=Math.ceil(n/(1e3*60*60*24));return l<0?0:l},q=(e,r)=>{if(e==="상시모집"||!r)return"regular";const s=y(r);return s===0?"end":s<=7?"d-day":"regular"},P=e=>{const{data:r,isLoading:s,isError:n,error:l}=x({queryKey:["recruitmentDetail",e],queryFn:async()=>{if(!e)return null;const a=await R(e);return!a||a.length===0?[]:a.map(i=>({recruitmentId:i.id,clubId:i.clubId,clubName:i.clubName,title:i.title,description:i.description,type:i.type,phoneNumber:i.phoneNumber,email:i.email,startDate:i.startDate,endDate:i.endDate,createdAt:i.createdAt,url:i.url,images:[],status:q(i.type,i.endDate),dDay:y(i.endDate),isScrapped:!1,scrapCount:0}))},enabled:!!e});return{data:r,isLoading:s,isError:n,error:l}},$=({clubId:e})=>{const r=j(),{data:s,isLoading:n,error:l}=P(e);return n?t.jsx("p",{className:"p-4 text-center",children:"로딩 중..."}):l?t.jsx("p",{className:"p-4 text-center text-red-500",children:"모집 공고를 불러오는 중 오류가 발생했습니다."}):t.jsx("div",{className:"flex flex-col divide-y divide-gray-100",children:!s||s.length===0?t.jsx("div",{className:"py-10 text-center text-gray-300 text-base font-medium leading-[1.35] tracking-[-0.03em]",children:"등록된 모집 공고가 없습니다."}):s.map(a=>t.jsx("div",{onClick:()=>r(`/recruitments/${a.recruitmentId}`),className:"cursor-pointer",children:t.jsx(Z,{recruitmentId:a.recruitmentId,recruitmentStatus:a.status,dDay:a.dDay,title:a.title,saveCount:a.scrapCount,postedDate:A(a.createdAt)})},a.recruitmentId))})},B=({isOpen:e,onClose:r,children:s})=>(c.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[e]),c.useEffect(()=>{const n=l=>{l.key==="Escape"&&r()};return e&&document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[e,r]),e?I.createPortal(t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:r,children:t.jsx("div",{className:"relative w-full h-full",onClick:n=>n.stopPropagation(),children:s})}),document.body):null);function z({title:e,titleId:r,...s},n){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},s),e?c.createElement("title",{id:r},e):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const F=c.forwardRef(z),f=({title:e})=>t.jsx("h3",{className:"text-[14px] font-semibold text-gray-800 leading-[1.35] tracking-[-0.03em] mb-3",children:e}),h=({content:e})=>{if(!e)return t.jsx("p",{className:"text-[16px] font-medium text-gray-300 leading-[1.65] tracking-[-0.03em]",children:"등록된 내용이 없습니다."});const r=e.replace(/\\n/g,`
`);return t.jsx("p",{className:"text-[16px] font-medium text-gray-700 leading-[1.65] tracking-[-0.03em] whitespace-pre-wrap",children:r})},K=({club:e,activityImages:r})=>{const s=r?r.filter(o=>!!o):[],[n,l]=c.useState(!1),[a,i]=c.useState(null),m=o=>{i(o),l(!0)},d=()=>{l(!1),i(null)};return t.jsxs("div",{className:"bg-gray-50 p-4 space-y-6",children:[t.jsxs("section",{children:[t.jsx(f,{title:"동아리 설명"}),t.jsx(h,{content:e.description})]}),t.jsxs("section",{children:[t.jsx(f,{title:"주요 활동"}),t.jsx(h,{content:e.mainActivities})]}),t.jsxs("section",{children:[t.jsx(f,{title:"활동 사진"}),s.length>0?t.jsx("div",{className:"space-y-4",children:s.map((o,g)=>t.jsx("img",{src:o,alt:`활동 사진 ${g+1}`,className:"w-full h-auto rounded-lg object-cover border border-gray-100",onClick:()=>m(o),loading:"lazy",decoding:"async"},g))}):t.jsx("p",{className:"text-[16px] font-medium text-gray-300 leading-[1.65] tracking-[-0.03em]",children:"등록된 사진이 없습니다."})]}),n&&a&&t.jsx(B,{isOpen:n,onClose:d,children:t.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:[t.jsx("button",{onClick:d,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-50 p-2 bg-black bg-opacity-50 rounded-full",children:t.jsx(F,{className:"h-6 w-6"})}),t.jsx("img",{src:a,alt:"확대된 활동 사진",className:"max-w-full max-h-full object-contain"})]})})]})},C=e=>({clubId:e.id,clubName:e.name,description:e.description,mainActivities:e.mainActivities||null,location:e.location||null,contactPhoneNumber:e.contactPhoneNumber||null,instagramUrl:e.instagramUrl||null,youtubeUrl:e.youtubeUrl||null,linktreeUrl:e.linktreeUrl||null,clubUrl:e.clubUrl||null,contactEmail:e.contactEmail||null,createdAt:e.createdAt||"",updatedAt:e.updatedAt||"",clubType:e.clubType,profileImageUrl:e.logoUrl,category:e.category,details:e.details||null,isRecruiting:e.recruiting}),W=async e=>{try{const r=await u.get(`/api/club/central/${e}`);if(r.data.status===200)return C(r.data.data)}catch(r){if(r.response&&r.response.status===404)try{const s=await u.get(`/api/club/academic/${e}`);if(s.data.status===200)return C(s.data.data)}catch(s){throw console.error("Academic club fetch failed:",s),s}throw console.error("Central club fetch failed:",r),r}throw new Error("Failed to fetch club details")},_=e=>x({queryKey:["clubDetail",e],queryFn:()=>W(e),enabled:!!e,retry:!1}),O=async e=>{try{const r=await u.get(`/api/club/${e}/activity-images`);return r.data.status===200&&Array.isArray(r.data.data)?r.data.data.map(s=>s.imageUrl):(console.warn("Activity images data is not an array:",r.data.data),[])}catch(r){return r.response?.status!==404&&console.error("Error fetching activity images:",r),[]}},Q=e=>x({queryKey:["clubActivityImages",e],queryFn:()=>O(e),enabled:!!e}),se=()=>{const{clubId:e}=v(),[r,s]=c.useState("모집공고"),n=Number(e);if(!n)return t.jsx("div",{className:"p-4 text-red-500",children:"유효하지 않은 접근입니다."});const{data:l,isLoading:a,isError:i,error:m}=_(n),{data:d,isLoading:o}=Q(n);return a||o?t.jsx("div",{className:"p-4 text-center",children:"동아리 정보를 불러오는 중..."}):i||!l?t.jsxs("div",{className:"p-4 text-center text-red-500",children:["동아리 정보를 불러오지 못했습니다. (",m?.message,")"]}):t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx(w,{variant:"page"}),t.jsx(L,{club:l}),t.jsx(H,{onTabChange:s}),r==="모집공고"?t.jsx($,{clubId:n}):t.jsx(K,{club:l,activityImages:d})]})};export{se as default};
