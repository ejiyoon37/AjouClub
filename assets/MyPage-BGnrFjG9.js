import{j as e,u as i,c as b,a as g,r as n,b as j}from"./index-DacEIc5C.js";import{u as y}from"./useMypageData-DsrNlLzP.js";import{u as N}from"./useClubs-DR1qsRbr.js";import{D as x}from"./Default_images-DTygkBZ9.js";import{H as v}from"./Header-CEzJuSZ3.js";import"./useQuery-CRLXNPUU.js";import"./icn_search_24-2-BVm-53NN.js";const w="/assets/user-CwYT89CU.png",k=({user:t})=>e.jsxs("section",{role:"region","aria-label":"사용자 프로필 영역",className:"flex flex-col items-center py-8 px-4 bg-white",children:[e.jsx("img",{src:t.profilePic||w,alt:`${t.name}의 프로필 사진`,className:"w-[72px] h-[72px] rounded-full border border-gray-100 object-cover"}),e.jsx("p",{className:"mt-4 text-[18px] font-semibold text-gray-900 leading-[135%] tracking-[-0.03em]",children:t.name}),e.jsx("p",{className:"mt-[2px] text-[14px] font-medium text-gray-300 leading-[135%] tracking-[-0.03em]",children:t.email})]}),I=({item:t})=>{const r=i(),a=()=>{r(`/recruitments/${t.recruitmentId}`)};return e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-xl border border-gray-100 cursor-pointer",onClick:a,children:[e.jsx("img",{src:t.thumbnailUrl||x,alt:t.title,className:"w-[80px] h-[80px] rounded-md object-cover border border-gray-200",loading:"lazy",decoding:"async"}),e.jsx("p",{className:"text-[15px] font-medium text-gray-900 leading-[135%] tracking-[-0.03em]",children:t.title})]})},C=async()=>{try{await b.post("/logout"),g.getState().logout()}catch(t){console.error("Logout 실패:",t)}},L=t=>n.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{d:"M5.54987 12.7842L10.4497 7.99976L5.54987 3.21533",stroke:"#C9D1D9",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round"})),M=({club:t})=>{const r=i();return e.jsxs("button",{onClick:()=>r(`/clubs/${t.clubId}`),className:"w-full flex items-center justify-between bg-gray-50 rounded-[10px] p-[12px] gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.logoUrl||x,alt:t.clubName,className:"w-[48px] h-[48px] rounded-full border border-gray-100 object-cover"}),e.jsx("span",{className:"text-[16px] font-semibold text-gray-800 leading-[135%] tracking-[-0.03em]",children:t.clubName})]}),e.jsx(L,{className:"w-4 h-4 text-gray-400"})]})},R=()=>{const{isLoggedIn:t,logout:r,user:a}=g(),c=i(),o=j(),{favorites:m,isLoading:u,error:p}=y(),{clubs:l}=N({}),d=n.useMemo(()=>!a?.managedClubIds||!l?[]:l.filter(s=>a.managedClubIds.includes(s.clubId)),[a,l]),h=d.length>0;n.useEffect(()=>{t||c(`/login?redirect=${o.pathname}`,{replace:!0})},[t,c,o]);const f=async()=>{try{await C()}catch(s){console.error("서버 로그아웃 실패:",s)}r(),window.location.href="/"};return u?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:"로딩 중..."}):p||!a?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:"오류가 발생했습니다."}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx(v,{variant:"page"}),e.jsx(k,{user:a}),e.jsx("div",{className:"w-full h-2 bg-gray-50"}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-4 py-5 bg-white",children:[e.jsx("p",{className:"text-[14px] font-medium leading-[135%] tracking-[-0.03em] text-gray-600 mb-3",children:"운영중인 동아리"}),e.jsx("div",{className:"space-y-3",children:d.map(s=>e.jsx(M,{club:{clubId:s.clubId,clubName:s.clubName,logoUrl:s.profileImageUrl}},s.clubId))})]}),e.jsx("div",{className:"w-full h-2 bg-gray-50"})]}),e.jsxs("div",{className:"px-4 py-5 bg-white",children:[e.jsx("p",{className:"text-[14px] font-medium leading-[135%] tracking-[-0.03em] text-gray-600 mb-2",children:"저장한 공고"}),m.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-16",children:e.jsx("p",{className:"text-[16px] font-medium text-gray-300 leading-[135%] tracking-[-0.03em] text-center",children:"저장한 공고가 없습니다"})}):m.map(s=>e.jsx("div",{className:"mb-3",children:e.jsx(I,{item:s})},s.recruitmentId))]}),e.jsx("div",{className:"px-4 mt-10",children:e.jsx("button",{className:"text-[12px] font-medium underline text-gray-600 leading-[140%] tracking-[-0.03em]",onClick:f,children:"로그아웃하기"})})]})};export{R as default};
