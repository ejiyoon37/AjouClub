import{u as v,b as C,r as c,j as t}from"./index-DWArhSub.js";import{H as S}from"./Header-B5qY0vLE.js";import{T as u,S as w,F,B as I,a as B}from"./icn_filter_16-CuVx9LEt.js";import{u as O,C as k}from"./Card_Club-B5_KbnHL.js";import{S as A}from"./ic-arrow-down-gray-24-Btsl2hY-.js";import"./icn_search_24-2-WrgszhQ_.js";import"./useQuery-DlTsrqeO.js";import"./Chip_type-BuTpcSAz.js";const P=()=>{const o=v(),f=C(),[h,n]=c.useState(!1),[i,g]=c.useState("최근 등록순"),[s,j]=c.useState(f.state?.filters||{}),y=["최근 등록순","가나다 순"],{clubs:m,isLoading:N,error:x}=O({sort:i==="최근 등록순"?"recent":"alphabetical",...s}),d=c.useMemo(()=>{const e=[];return s.type&&e.push(s.type),s.category&&e.push(s.category),s.department&&e.push(s.department),s.isRecruiting&&e.push("모집중"),e},[s]),l=d.length,b=e=>{j(a=>{const r={...a};return a.type===e&&delete r.type,a.category===e&&delete r.category,a.department===e&&delete r.department,e==="모집중"&&delete r.isRecruiting,r})},p=c.useMemo(()=>{const e=[...m];switch(i){case"가나다 순":return e.sort((a,r)=>a.clubName.localeCompare(r.clubName));case"최근 등록순":return e.sort((a,r)=>r.clubId-a.clubId);default:return e}},[m,i]);return t.jsxs("div",{className:"flex flex-col min-h-screen bg-white",children:[t.jsx(S,{variant:"page"}),t.jsxs("nav",{className:"flex gap-3 px-4 pt-2",children:[t.jsx(u,{isActive:!1,onClick:()=>o("/recruitment"),children:"모집공고"}),t.jsx(u,{isActive:!0,children:"동아리 둘러보기"})]}),t.jsxs("div",{className:"flex justify-between items-center p-4",children:[t.jsxs("button",{className:"flex items-center gap-1",onClick:()=>n(!0),children:[t.jsx("span",{className:"text-sm text-gray-700 font-medium",children:i}),t.jsx(A,{className:"w-4 h-4 -rotate-90 text-gray-700"})]}),t.jsxs("button",{className:"flex items-center gap-1",onClick:()=>o("/clubs/filter",{state:{filters:s}}),children:[t.jsx(w,{className:"w-4 h-4"}),t.jsxs("span",{className:`text-sm font-medium ${l>0?"text-gray-700":"text-gray-300"}`,children:["필터 ",l>0&&`(${l})`]})]})]}),l>0&&t.jsx("div",{className:"flex gap-2 px-4 pb-3 overflow-x-auto scrollbar-hide border-b border-gray-100",children:d.map(e=>t.jsx(F,{onDelete:()=>b(e),children:e},e))}),t.jsx("main",{className:"flex-grow px-4 pt-4",children:N?t.jsx("div",{className:"text-center pt-20",children:"로딩 중..."}):x?t.jsxs("div",{className:"text-center pt-20 text-red-500",children:["오류 발생: ",x.message]}):p.length>0?t.jsx("div",{className:"grid grid-cols-3 gap-x-6 gap-y-5 w-fit mx-auto",children:p.map(e=>t.jsx(k,{club:e,variant:"explore"},e.clubId))}):t.jsx("div",{className:"flex flex-col items-center justify-center pt-20",children:t.jsx("p",{className:"text-[16px] font-semibold text-gray-500 leading-[1.35] tracking-[-0.03em] text-center",children:"해당하는 동아리가 없습니다."})})}),t.jsx(I,{isOpen:h,onClose:()=>n(!1),children:t.jsx("ul",{className:"space-y-2",children:y.map(e=>t.jsx("li",{children:t.jsx(B,{isActive:i===e,onClick:()=>{g(e),n(!1)},children:e})},e))})})]})};export{P as default};
