import{u as m}from"./useQuery-C7pHblR0.js";import{c as i}from"./index-DEXBsR4C.js";const g=e=>{try{const t=new Date(e);return isNaN(t.getTime())?e:`${t.getFullYear()}. ${t.getMonth()+1}. ${t.getDate()}`}catch{return e}},d=async e=>{const t=await i.get(`/api/recruitments/${e}`);if(t.data.status!==200)throw new Error(t.data.message);return t.data.data},l=async e=>(await i.get(`/api/recruitments/${e}/images`)).data,u=e=>{if(!e)return 0;const t=new Date,a=new Date(e);t.setHours(0,0,0,0),a.setHours(0,0,0,0);const s=a.getTime()-t.getTime(),n=Math.ceil(s/(1e3*60*60*24));return n<0?0:n},f=(e,t)=>{if(e==="상시모집"||!t)return"regular";const a=u(t);return a===0?"end":a<=7?"d-day":"regular"},p=e=>{const{data:t,isLoading:a,isError:s,error:n}=m({queryKey:["recruitmentDetail",e],queryFn:async()=>{if(!e)return null;const r=await d(e),c=r.id,o=await l(c);return{recruitmentId:r.id,clubId:r.clubId,clubName:r.clubName,title:r.title,description:r.description,type:r.type,phoneNumber:r.phoneNumber,email:r.email,startDate:r.startDate,endDate:r.endDate,createdAt:r.createdAt,url:r.url,images:o,status:f(r.type,r.endDate),dDay:u(r.endDate),isScrapped:!1,scrapCount:0}},enabled:!!e});return{data:t,isLoading:a,isError:s,error:n}};export{g as f,p as u};
